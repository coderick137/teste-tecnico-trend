<section
  class="px-6 py-4 rounded-2xl shadow-md bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200 transition-all duration-200 ease-in-out"
>
  <form [formGroup]="companyForm" (ngSubmit)="onSave()" class="space-y-6">
    <fieldset class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <label
          for="name"
          class="block mb-1 font-semibold text-gray-700 dark:text-gray-300"
          >Nome*</label
        >
        <input
          id="name"
          type="text"
          formControlName="name"
          class="w-full p-3 border rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500"
        />
        @if (companyForm.get('name')?.touched &&
        companyForm.get('name')?.invalid) {
        <p class="mt-1 text-sm text-red-500 dark:text-red-400">
          Nome é obrigatório.
        </p>
        }
      </div>

      <div>
        <label
          for="cnpj"
          class="block mb-1 font-semibold text-gray-700 dark:text-gray-300"
          >CNPJ*</label
        >
        <input
          id="cnpj"
          type="text"
          formControlName="cnpj"
          class="w-full p-3 border rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500"
        />
        @if (companyForm.get('cnpj')?.touched &&
        companyForm.get('cnpj')?.invalid) {
        <p class="mt-1 text-sm text-red-500 dark:text-red-400">
          CNPJ é obrigatório.
        </p>
        }
      </div>
    </fieldset>

    <fieldset
      formGroupName="contact"
      class="grid grid-cols-1 md:grid-cols-2 gap-6"
    >
      <div>
        <label
          for="email"
          class="block mb-1 font-semibold text-gray-700 dark:text-gray-300"
          >Email*</label
        >
        <input
          id="email"
          type="email"
          formControlName="email"
          class="w-full p-3 border rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500"
        />
        @if (contact?.get('email')?.touched && contact?.get('email')?.invalid) {
        <p class="mt-1 text-sm text-red-500 dark:text-red-400">
          Email válido é obrigatório.
        </p>
        }
      </div>

      <div>
        <label
          for="phone"
          class="block mb-1 font-semibold text-gray-700 dark:text-gray-300"
          >Telefone</label
        >
        <input
          id="phone"
          type="text"
          formControlName="phone"
          class="w-full p-3 border rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500"
        />
      </div>
    </fieldset>

    <fieldset
      formGroupName="address"
      class="grid grid-cols-1 md:grid-cols-2 gap-6"
    >
      <div>
        <label
          for="city"
          class="block mb-1 font-semibold text-gray-700 dark:text-gray-300"
          >Cidade</label
        >
        <input
          id="city"
          type="text"
          formControlName="city"
          class="w-full p-3 border rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500"
        />
      </div>

      <div>
        <label
          for="state"
          class="block mb-1 font-semibold text-gray-700 dark:text-gray-300"
          >Estado</label
        >
        <input
          id="state"
          type="text"
          formControlName="state"
          class="w-full p-3 border rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500"
        />
      </div>

      <div>
        <label
          for="neighborhood"
          class="block mb-1 font-semibold text-gray-700 dark:text-gray-300"
          >Bairro</label
        >
        <input
          id="neighborhood"
          type="text"
          formControlName="neighborhood"
          class="w-full p-3 border rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500"
        />
      </div>

      <div>
        <label
          for="zipCode"
          class="block mb-1 font-semibold text-gray-700 dark:text-gray-300"
          >CEP</label
        >
        <input
          id="zipCode"
          type="text"
          formControlName="zipCode"
          class="w-full p-3 border rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500"
        />
      </div>
    </fieldset>

    <fieldset>
      <label
        for="description"
        class="block mb-1 font-medium text-gray-700 dark:text-gray-300"
        >Descrição</label
      >
      <textarea
        id="description"
        formControlName="description"
        rows="4"
        class="w-full p-3 border rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500"
      ></textarea>
    </fieldset>

    <!-- Novo fieldset: Módulos -->
    <fieldset class="flex flex-col gap-6">
      <label
        class="inline-flex items-center gap-2 text-gray-700 dark:text-gray-300"
      >
        <input
          type="checkbox"
          class="rounded bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500"
          formControlName="enableCSAT"
        />
        Ativar Módulo CSAT
      </label>

      <label
        class="inline-flex items-center gap-2 text-gray-700 dark:text-gray-300"
      >
        <input
          type="checkbox"
          class="rounded bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500"
          formControlName="enableAI"
        />
        Ativar Módulo de IA
      </label>

      <label
        class="inline-flex items-center gap-2 text-gray-700 dark:text-gray-300"
      >
        <input
          type="checkbox"
          class="rounded bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500"
          formControlName="enableTrendVoip"
        />
        Ativar Módulo de TrendVoip
      </label>
    </fieldset>

    <!-- Novo fieldset: Canais -->
    <fieldset class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <div>
        <label
          for="maxCloudApi"
          class="block mb-1 font-semibold text-gray-700 dark:text-gray-300"
          >Máx. de canais Cloud API</label
        >
        <input
          id="maxCloudApi"
          type="number"
          min="0"
          class="w-full p-3 border rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500"
          formControlName="maxCloudApi"
        />
      </div>
      <div>
        <label
          for="maxBusiness"
          class="block mb-1 font-semibold text-gray-700 dark:text-gray-300"
          >Máx. de canais Business</label
        >
        <input
          id="maxBusiness"
          type="number"
          min="0"
          class="w-full p-3 border rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500"
          formControlName="maxBusiness"
        />
      </div>
      <div>
        <label
          for="maxBusinessPro"
          class="block mb-1 font-semibold text-gray-700 dark:text-gray-300"
          >Máx. de canais Business PRO</label
        >
        <input
          id="maxBusinessPro"
          type="number"
          min="0"
          class="w-full p-3 border rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500"
          formControlName="maxBusinessPro"
        />
      </div>
    </fieldset>

    <!-- Novo fieldset: Mensalidade e Periodicidade -->
    <fieldset class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <label
          for="monthlyValue"
          class="block mb-1 font-semibold text-gray-700 dark:text-gray-300"
          >Mensalidade</label
        >
        <input
          id="monthlyValue"
          type="number"
          min="0"
          class="w-full p-3 border rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500"
          formControlName="monthlyValue"
        />
      </div>

      <div>
        <label
          for="recurrence"
          class="block mb-1 font-semibold text-gray-700 dark:text-gray-300"
          >Periodicidade</label
        >
        <select
          id="recurrence"
          class="w-full p-3 border rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200"
          formControlName="recurrence"
        >
          <option value="Mensal">Mensal</option>
          <option value="Trimestral">Trimestral</option>
          <option value="Semestral">Semestral</option>
          <option value="Anual">Anual</option>
        </select>
      </div>
    </fieldset>

    <fieldset
      class="flex flex-col items-center justify-center gap-2 border border-dashed rounded-lg p-10 mt-4 border-gray-300 dark:border-gray-600"
    >
      <label for="thumbnail" class="block text-gray-700 dark:text-gray-300"
        >Selecione os arquivos desejados</label
      >
      <input
        id="thumbnail"
        type="file"
        formControlName="thumbnail"
        class="file-input bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200"
      />
    </fieldset>

    <fieldset class="mb-4">
      <label class="inline-flex items-center">
        <input
          type="checkbox"
          formControlName="active"
          class="mr-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200"
        />
        Ativar
      </label>
    </fieldset>

    <footer class="flex gap-4 mt-6 justify-end">
      <button
        type="submit"
        [disabled]="companyForm.invalid"
        class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed"
      >
        Cadastrar
      </button>
      <button
        type="button"
        (click)="goToDashboard()"
        class="bg-gray-600 text-gray-200 px-6 py-2 rounded hover:bg-gray-500 transition"
      >
        Cancelar
      </button>
    </footer>
  </form>
</section>
